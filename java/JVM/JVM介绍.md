# JVM

---

## JDK / JRE / JVM 的关系

### JDK 开发工具包

(java development kit) **支持开发和运行 Java 程序。**

JDK 包含 JRE 以及各种 Java 开发工具（如编译器 javac 、调试器 jdb 等）。

### JRE 运行环境

(java runtime environment) **能够运行已编译的 Java 程序。**

JRE 包含 JVM 以及运行时所需调用的基础类库（如 java.lang 包、 java.util 包等）。

### JVM 虚拟机

(java virtual machine) **运行 Java 程序的工作环境。**

Java 程序在虚拟机上运行而不是直接在操作系统上运行，从软件层面屏蔽了底层硬件指令的细节。虚拟机会根据操作系统自动将字节码文件转化成相应的机器码，使 Java 字节码文件能够在多种平台上不加修改地运行。

*HotSpot 虚拟机 是 SunJDK 和 OpenJDK 中所带的虚拟机，也是目前使用范围最广的 Java 虚拟机。*

---

## Java 运行原理

### 基本概念

**解释和编译**

- **解释**：源文件经过编译器编译成为脚本文件，由解释器逐行解释并执行。灵活性更好。
- **编译**：源文件经过编译器编译成为可执行文件，由计算机直接去执行。性能更好。

**静态编译和动态编译**

- **静态编译**：编译时确定类型，绑定对象。性能更好。
- **动态编译**：运行时确定类型，绑定对象。能更好地支持多态，灵活性强。

### Java 运行原理

***Java 是编译和解释并行的语言，采取动态编译，支持反射机制。***

1. 源文件(.java) 经过编译器编译成为 字节码文件(.class) ，通过类加载器搬运到 JVM 中逐行解释并执行。

2. 即时编译器(JIT) 在编译时会识别反复执行的热点代码（超过 10000 次）并保存机器码，复用时可直接由 JVM 执行。
   

**优势**：以虚拟机作为中介，字节码文件可以在所有操作平台上通用。即一次编译、到处运行。

**劣势**：但这也导致了 Java 语言性能不如 C/C++ 等编译语言。






